import pandas as pd
import geopandas as gpd
from shapely.geometry import Point
import matplotlib.pyplot as plt

# --- Load CSV with vulnerability scores ---
df = pd.read_csv("predictions.csv")  # update path if needed

# --- Create GeoDataFrame ---
geometry = [Point(xy) for xy in zip(df["lon"], df["lat"])]
gdf = gpd.GeoDataFrame(df, geometry=geometry, crs="EPSG:4326")

# --- Plot as heatmap ---
fig, ax = plt.subplots(figsize=(10, 8))
gdf.plot(
    column="vulnerability_score",
    cmap="hot_r",  # or "inferno", "OrRd", etc.
    markersize=40,
    legend=True,
    ax=ax
)
ax.set_title("Urban Heat Vulnerability (Predicted)", fontsize=14)
plt.axis("off")
plt.tight_layout()
plt.show()
